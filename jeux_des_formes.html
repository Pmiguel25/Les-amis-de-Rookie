<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jeu de Formes</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            align-items: center;
            height: 100vh;
            background-color: #f5f5f5;
            position: relative;
        }

        .zone {
            position: absolute;
            width: 150px;
            height: 150px;
            border: 5px solid black;
        }

        .zone.cercle {
            border-radius: 50%;
            top: 10px;
            left: 10px;
        }

        .zone.carre {
            top: 10px;
            right: 10px;
        }

        .zone.triangle {
            top: auto;
            bottom: 10px;
            left: 10px;
            clip-path: polygon(50% 0, 0 100%, 100% 100%);
            background-color: white;
        }

        .forme {
            position: absolute;
            width: 50px;
            height: 50px;
            background-color: blue;
            cursor: pointer;
        }

        .forme.cercle {
            border-radius: 50%;
        }

        .forme.triangle {
            clip-path: polygon(50% 0, 0 100%, 100% 100%);
        }

        .forme.carre {
            /* no special styles needed */
        }

        #message {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: white;
            padding: 20px;
            border: 2px solid black;
            border-radius: 10px;
            text-align: center;
        }

        #rejouer {
            margin-top: 10px;
            padding: 10px 20px;
            font-size: 1em;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <div class="zone cercle" data-type="cercle"></div>
    <div class="zone carre" data-type="carre"></div>
    <div class="zone triangle" data-type="triangle"></div>

    <div id="message">
        <p>Félicitations, vous avez réussi !</p>
        <button id="rejouer">Rejouer</button>
    </div>

    <script>
        const formes = [
            ...Array(5).fill('cercle'),
            ...Array(5).fill('carre'),
            ...Array(5).fill('triangle')
        ];
        let placed = 0;

        const zones = document.querySelectorAll('.zone');
        const message = document.getElementById('message');
        const rejouerBtn = document.getElementById('rejouer');

        formes.forEach((type, index) => {
            const forme = document.createElement('div');
            forme.classList.add('forme', type);
            forme.setAttribute('draggable', 'true');
            forme.style.top = `${Math.random() * 80 + 10}vh`;
            forme.style.left = `${Math.random() * 80 + 10}vw`;
            forme.dataset.type = type;

            document.body.appendChild(forme);

            forme.addEventListener('dragstart', (e) => {
                e.dataTransfer.setData('text/plain', type);
                forme.style.opacity = '0.5';
            });

            forme.addEventListener('dragend', () => {
                forme.style.opacity = '1';
            });
        });

        zones.forEach((zone) => {
            zone.addEventListener('dragover', (e) => {
                e.preventDefault();
            });

            zone.addEventListener('drop', (e) => {
                e.preventDefault();
                const type = e.dataTransfer.getData('text');
                const dragged = document.querySelector(`.forme[data-type="${type}"]`);

                if (zone.dataset.type === type) {
                    dragged.style.backgroundColor = 'green';
                    dragged.setAttribute('draggable', 'false');
                    zone.appendChild(dragged);
                    placed++;

                    if (placed === formes.length) {
                        message.style.display = 'block';
                    }
                } else {
                    dragged.style.backgroundColor = 'red';
                    setTimeout(() => {
                        dragged.style.backgroundColor = 'blue';
                        dragged.style.top = `${Math.random() * 80 + 10}vh`;
                        dragged.style.left = `${Math.random() * 80 + 10}vw`;
                    }, 2000);
                }
            });
        });

        rejouerBtn.addEventListener('click', () => {
            location.reload();
        });
    </script>
</body>
</html>
