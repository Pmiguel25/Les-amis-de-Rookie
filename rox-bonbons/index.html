<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>ActivitÃ© Rox - Bonbons</title>

  <style>
    body {
      margin: 0;
      background: black;
      color: white;
      font-family: Arial, sans-serif;
    }

    #container {
      display: flex;
      height: 100vh;
    }

    /* ----------------------------
       ZONE GAUCHE (Rox)
    ---------------------------- */
    #leftPanel {
      width: 25%;
      padding: 20px;
      box-sizing: border-box;
      text-align: center;
      border-right: 2px solid white;
    }

    #roxImg {
      max-width: 100%;
      max-height: 60vh;
    }

    #score {
      margin-top: 20px;
      font-size: 18px;
      white-space: pre-line;
    }

    /* ----------------------------
       ZONE DROITE (Cercles)
    ---------------------------- */
    #gameArea {
      width: 75%;
      padding: 30px;
      box-sizing: border-box;

      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
      gap: 40px;

      justify-items: center;
      align-items: start;
    }

    .circleBox {
      text-align: center;
      width: 120px;
    }

    .circle {
      width: 90px;
      height: 90px;
      border-radius: 50%;
      background: deepskyblue;
      cursor: pointer;
    }

    /* Invisible mais garde la place */
    .hidden {
      visibility: hidden;
      pointer-events: none;
    }

    .rewardImg {
      margin-top: 10px;
      width: 80px;
      height: 80px;
      display: none;
    }

    /* ----------------------------
       MESSAGE DE FIN
    ---------------------------- */
    #successMessage {
      position: fixed;
      top: 40%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: #222;
      padding: 30px;
      border-radius: 20px;
      text-align: center;
      display: none;
    }

    button {
      margin-top: 15px;
      padding: 12px 20px;
      font-size: 18px;
      cursor: pointer;
    }
  </style>
</head>

<body>

<div id="container">

  <!-- Zone gauche -->
  <div id="leftPanel">
    <h2>Rox</h2>
    <img id="roxImg" src="images/rox2.png">
    <div id="score"></div>
  </div>

  <!-- Zone droite -->
  <div id="gameArea"></div>

</div>

<!-- Message de rÃ©ussite -->
<div id="successMessage">
  <h2>ðŸŽ‰ Bravo ! Tous les bonbons sont trouvÃ©s !</h2>
  <button onclick="nextLevel()">Niveau suivant</button>
</div>

<script>
/* ===============================
   IMAGES (chemins GitHub)
================================ */

const RoxImages = [
  "images/rox1.png",
  "images/rox2.png",
  "images/rox3.png",
  "images/rox4.png",
  "images/rox5.png"
];

const bonbonImage = "images/bonbon_entier.png";
const emballageImage = "images/emballage_vide.png";

/* ===============================
   VARIABLES DE JEU
================================ */

let happiness = 1; // commence niveau 2
let totalCircles = 2;
let found = 0;
let wins = 0;

/* ===============================
   MISE Ã€ JOUR ROX
================================ */

function updateRox() {
  document.getElementById("roxImg").src = RoxImages[happiness];
}

/* ===============================
   SCORE
================================ */

function updateScore() {
  document.getElementById("score").innerText =
    `Bonbons trouvÃ©s : ${found} / ${totalCircles}\nParties gagnÃ©es : ${wins}`;
}

/* ===============================
   CRÃ‰ATION DES CERCLES
   => placement en grille = jamais superposÃ©
================================ */

function buildCircles() {
  const area = document.getElementById("gameArea");
  area.innerHTML = "";
  found = 0;

  for (let i = 0; i < totalCircles; i++) {

    const box = document.createElement("div");
    box.className = "circleBox";

    const circle = document.createElement("div");
    circle.className = "circle";
    circle.dataset.clicked = "0";

    const reward = document.createElement("img");
    reward.className = "rewardImg";

    circle.onclick = () => handleClick(circle, reward);

    box.appendChild(circle);
    box.appendChild(reward);
    area.appendChild(box);
  }

  updateScore();
}

/* ===============================
   CLIC SUR CERCLE
================================ */

function handleClick(circle, rewardImg) {

  circle.classList.add("hidden");

  if (circle.dataset.clicked === "0") {

    // Premier clic => bonbon trouvÃ©
    circle.dataset.clicked = "1";

    rewardImg.src = bonbonImage;
    rewardImg.style.display = "block";

    found++;

    // Rox revient direct au niveau 1
    happiness = 0;

  } else {

    // DÃ©jÃ  cliquÃ© => emballage vide
    rewardImg.src = emballageImage;
    rewardImg.style.display = "block";

    // Rox descend dâ€™un niveau
    if (happiness < 4) happiness++;
  }

  updateRox();
  updateScore();

  // RÃ©apparition aprÃ¨s 3 secondes (sans bouger)
  setTimeout(() => {
    circle.classList.remove("hidden");
  }, 3000);

  // Fin de partie
  if (found === totalCircles) {
    wins++;
    document.getElementById("successMessage").style.display = "block";
  }
}

/* ===============================
   NIVEAU SUIVANT
================================ */

function nextLevel() {

  document.getElementById("successMessage").style.display = "none";

  totalCircles++;
  happiness = 1;

  buildCircles();
  updateRox();
}

/* ===============================
   DÃ‰MARRAGE
================================ */

updateRox();
buildCircles();
</script>

</body>
</html>
